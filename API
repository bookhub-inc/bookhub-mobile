import 'dart:async';
import 'dart:convert';
import 'package:http/http.dart' as http;

Future createPost(String nome, String sobrenome, String usuario, String senha, String email, String Telefone, int id) async {
  var jsonText = jsonEncode({'nome': nome, 'sobrenome' : sobrenome, 'login': usuario, 'senha': senha, 'email': email, 'telefone': Telefone, 'idAvatar':id});

  var url = 'http://ec2-52-67-248-77.sa-east-1.compute.amazonaws.com:8080/usuario';
  var response = await http.post(url,
      headers: {"Content-Type": "application/json"},
      body: jsonText);
  print('Response status: ${response.statusCode}');
  print('Response body: ${response.body}');
  print(await http.read('http://ec2-52-67-248-77.sa-east-1.compute.amazonaws.com:8080/usuario'));

}

class Urls {
  static const BASE_API_URL = "http://ec2-52-67-248-77.sa-east-1.compute.amazonaws.com:8080/usuario";
}

class ApiService {

  static Future<dynamic> _get(String url) async {
    try {
      final response = await http.get(url);
      if (response.statusCode == 200) {
        return json.decode(response.body);
      } else {
        return null;
      }
    } catch (ex) {
      return null;
    }
  }

  static Future<List<dynamic>> getUserList() async {
    return await _get('${Urls.BASE_API_URL}');
  }

}
