//Aqui foi implementada uma função que a partir dos dados de um endpoint da API, ele faz um get dos dados do mesmo e exibe na tela.


import 'dart:async';
import 'dart:convert';
import 'package:flutter/material.dart';
import 'package:http/http.dart' as http;


class Post {
  final int id;
  final String nome;
  final String usuario;
  final String telefone;
  final String email;
  final String senha;
  final String cpf;


  Post({this.id, this.nome, this.usuario, this.telefone,this.email,this.senha,this.cpf});
  factory Post.fromJson(Map<String, dynamic> json) {
    return Post(
      id: json['id'],
      nome: json['nome'],
      usuario: json['usuario'],
      telefone: json['telefone'],
      email: json['email'],
      senha: json['senha'],
      cpf: json['cpf'],
    );
  }
}

Future<Post> fetchPost() async {
  final response = await http.get('https://jsonstorage.net/api/items/c4298856-9078-4733-8ddd-fa5cc094ce5b');
  if (response.statusCode == 200) {
    return Post.fromJson(json.decode(response.body));
  } else {
    throw Exception('Falha ao carregar um post');
  }
}









void main() => runApp(MyApp());
class MyApp extends StatelessWidget {

  @override

  Widget build(BuildContext context) {
    return MaterialApp(
      title: 'Obtendo dados da Web - Exemplo',
      theme: ThemeData(
        primarySwatch: Colors.blue,
      ),
      home: Scaffold(
        appBar: AppBar(
          title: Text('Pegando dados da Web'),
        ),
        body: Center(
          child: FutureBuilder<Post>(
            future: fetchPost(),
            builder: (context, snapshot) {
              if (snapshot.hasData)
              return Text(
                  'id :' + snapshot.data.id.toString()
                      + '\n\nnome : ' + snapshot.data.nome
                      + '\n\nusuario : ' + snapshot.data.usuario
                      + '\n\ntelefone: ' + snapshot.data.telefone
                      + '\n\n\ email: ' + snapshot.data.email
                      + '\n\nsenha: ' + snapshot.data.senha
                      + '\n\ncpf: ' +snapshot.data.cpf
              );
              else if (snapshot.hasError)
                return Text(snapshot.error);


              return CircularProgressIndicator();
            },
          ),
        ),
      ),
    );
  }
}

